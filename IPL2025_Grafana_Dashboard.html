<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPL 2025 Â· Grafana Analytics Dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap');

  :root {
    --bg-base:       #0b0e14;
    --bg-panel:      #131720;
    --bg-panel2:     #161b27;
    --bg-header:     #0d1117;
    --border:        #1f2937;
    --border-bright: #2d3a50;
    --text-primary:  #e2e8f0;
    --text-muted:    #64748b;
    --text-dim:      #94a3b8;
    --accent-orange: #f97316;
    --accent-blue:   #3b82f6;
    --accent-green:  #22c55e;
    --accent-red:    #ef4444;
    --accent-yellow: #eab308;
    --accent-purple: #a855f7;
    --accent-teal:   #14b8a6;
    --grafana-orange:#ff6b35;
    --grafana-glow:  rgba(255,107,53,0.15);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'JetBrains Mono', monospace;
    background: var(--bg-base);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .topbar {
    background: var(--bg-header);
    border-bottom: 1px solid var(--border);
    padding: 0 20px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .topbar-left {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .grafana-logo {
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 18px;
    color: var(--grafana-orange);
    letter-spacing: 1px;
  }

  .grafana-logo svg { width: 22px; height: 22px; }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--text-muted);
    font-size: 12px;
  }

  .breadcrumb span { color: var(--text-dim); }
  .breadcrumb .sep { color: var(--border-bright); }
  .breadcrumb .active { color: var(--text-primary); }

  .topbar-right {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .time-range {
    background: var(--bg-panel2);
    border: 1px solid var(--border-bright);
    border-radius: 4px;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--text-dim);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .time-range .dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent-green);
    box-shadow: 0 0 6px var(--accent-green);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  .refresh-btn {
    background: var(--bg-panel2);
    border: 1px solid var(--border-bright);
    border-radius: 4px;
    padding: 4px 8px;
    color: var(--text-dim);
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
  }

  .refresh-btn:hover { border-color: var(--accent-blue); color: var(--accent-blue); }

  /* â”€â”€ DASHBOARD TITLE ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .dash-title-row {
    padding: 14px 20px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .dash-title {
    font-family: 'Rajdhani', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .dash-title .tag {
    background: rgba(249,115,22,0.15);
    border: 1px solid rgba(249,115,22,0.3);
    border-radius: 3px;
    padding: 2px 8px;
    font-size: 11px;
    color: var(--grafana-orange);
    font-family: 'JetBrains Mono', monospace;
    font-weight: 500;
  }

  .filter-row {
    display: flex;
    gap: 8px;
    padding: 10px 20px;
    border-bottom: 1px solid var(--border);
    align-items: center;
    flex-wrap: wrap;
  }

  .filter-label { font-size: 11px; color: var(--text-muted); margin-right: 4px; }

  .filter-select {
    background: var(--bg-panel2);
    border: 1px solid var(--border-bright);
    border-radius: 4px;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--text-primary);
    font-family: 'JetBrains Mono', monospace;
    cursor: pointer;
    outline: none;
    min-width: 130px;
  }

  .filter-select:focus { border-color: var(--accent-blue); }

  /* â”€â”€ GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .grid {
    padding: 12px 20px;
    display: grid;
    gap: 8px;
  }

  .row-stat { grid-template-columns: repeat(6, 1fr); }
  .row-mid  { grid-template-columns: 2fr 2fr 1.2fr; }
  .row-bot  { grid-template-columns: 1.5fr 1.5fr 1fr; }
  .row-last { grid-template-columns: 2fr 1fr 1fr; }

  /* â”€â”€ PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .panel {
    background: var(--bg-panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    overflow: hidden;
    transition: border-color 0.2s;
    position: relative;
  }

  .panel:hover { border-color: var(--border-bright); }

  .panel-header {
    padding: 8px 12px 6px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
  }

  .panel-title {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.6px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .panel-title .icon { font-size: 12px; }

  .panel-menu {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .panel:hover .panel-menu { opacity: 1; }

  .panel-menu-btn {
    width: 20px; height: 20px;
    background: var(--bg-panel2);
    border: 1px solid var(--border);
    border-radius: 3px;
    color: var(--text-muted);
    font-size: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
  }

  .panel-menu-btn:hover { border-color: var(--accent-blue); color: var(--accent-blue); }

  .panel-body { padding: 10px 12px; }

  /* â”€â”€ STAT PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .stat-value {
    font-family: 'Rajdhani', sans-serif;
    font-size: 36px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 4px;
    letter-spacing: -0.5px;
  }

  .stat-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }

  .stat-delta {
    font-size: 10px;
    margin-top: 4px;
    display: flex;
    align-items: center;
    gap: 3px;
  }

  .delta-up   { color: var(--accent-green); }
  .delta-down { color: var(--accent-red); }
  .delta-neu  { color: var(--text-muted); }

  .sparkline-wrap { margin-top: 6px; height: 30px; }

  /* â”€â”€ CHART PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .chart-wrap { height: 200px; position: relative; }
  .chart-wrap-sm { height: 160px; position: relative; }
  .chart-wrap-lg { height: 240px; position: relative; }

  /* â”€â”€ TABLE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 11px;
  }

  .data-table th {
    text-align: left;
    padding: 5px 8px;
    color: var(--text-muted);
    text-transform: uppercase;
    font-size: 10px;
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--border);
    font-weight: 500;
  }

  .data-table td {
    padding: 5px 8px;
    border-bottom: 1px solid rgba(31,41,55,0.5);
    color: var(--text-primary);
  }

  .data-table tr:last-child td { border-bottom: none; }

  .data-table tr:hover td { background: rgba(59,130,246,0.05); }

  .rank-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 18px; height: 18px;
    border-radius: 3px;
    font-size: 9px;
    font-weight: 700;
    background: var(--bg-panel2);
    color: var(--text-muted);
  }

  .rank-badge.gold   { background: rgba(234,179,8,0.2);  color: var(--accent-yellow); }
  .rank-badge.silver { background: rgba(148,163,184,0.2);color: #94a3b8; }
  .rank-badge.bronze { background: rgba(180,83,9,0.2);   color: #b45309; }

  .bar-cell { display: flex; align-items: center; gap: 6px; }
  .bar-bg {
    flex: 1; height: 4px;
    background: var(--border);
    border-radius: 2px;
    overflow: hidden;
  }
  .bar-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.8s ease;
  }

  .team-chip {
    display: inline-block;
    padding: 1px 6px;
    border-radius: 2px;
    font-size: 10px;
    font-weight: 600;
  }

  /* â”€â”€ GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .gauge-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
  }

  .gauge-svg { width: 120px; height: 70px; }

  .gauge-val {
    font-family: 'Rajdhani', sans-serif;
    font-size: 28px;
    font-weight: 700;
    text-align: center;
    margin-top: -4px;
  }

  .gauge-sub { font-size: 10px; color: var(--text-muted); text-align: center; }

  /* â”€â”€ HEATMAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .heatmap-grid {
    display: grid;
    gap: 2px;
    padding: 4px 0;
  }

  .heatmap-cell {
    height: 22px;
    border-radius: 2px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 6px;
    font-size: 10px;
    transition: opacity 0.2s;
    cursor: default;
  }

  .heatmap-cell:hover { opacity: 0.85; filter: brightness(1.1); }

  /* â”€â”€ ALERT BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .alert-item {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 7px 0;
    border-bottom: 1px solid rgba(31,41,55,0.5);
    font-size: 11px;
  }

  .alert-item:last-child { border-bottom: none; }

  .alert-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    margin-top: 3px;
    flex-shrink: 0;
  }

  .alert-text { color: var(--text-dim); line-height: 1.4; }
  .alert-time { color: var(--text-muted); font-size: 10px; margin-top: 1px; }

  /* â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .progress-item { margin-bottom: 10px; }

  .progress-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
    font-size: 11px;
  }

  .progress-name { color: var(--text-dim); }
  .progress-val  { color: var(--text-primary); font-weight: 600; }

  .progress-track {
    height: 5px;
    background: var(--border);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 1s ease;
  }

  /* â”€â”€ ANNOTATION BAND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .panel-annotation {
    font-size: 10px;
    color: var(--text-muted);
    padding: 4px 12px 6px;
    display: flex;
    gap: 12px;
  }

  .ann-dot { display: inline-block; width: 8px; height: 2px; border-radius: 1px; vertical-align: middle; margin-right: 4px; }

  /* â”€â”€ TIME SERIES TICK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .ts-ticks {
    display: flex;
    justify-content: space-between;
    padding: 2px 0 0;
    font-size: 9px;
    color: var(--text-muted);
  }

  /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 1100px) {
    .row-stat { grid-template-columns: repeat(3, 1fr); }
    .row-mid  { grid-template-columns: 1fr 1fr; }
    .row-bot  { grid-template-columns: 1fr 1fr; }
    .row-last { grid-template-columns: 1fr 1fr; }
  }

  @media (max-width: 700px) {
    .row-stat, .row-mid, .row-bot, .row-last { grid-template-columns: 1fr; }
    .topbar { padding: 0 12px; }
    .grid { padding: 8px 12px; }
  }

  /* â”€â”€ LOADING SHIMMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @keyframes shimmer {
    0%   { background-position: -400px 0; }
    100% { background-position: 400px 0; }
  }

  .loaded { animation: fadeIn 0.5s ease forwards; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(4px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-left">
    <div class="grafana-logo">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="#ff6b35" stroke-width="1.5"/>
        <path d="M8 12h8M12 8v8" stroke="#ff6b35" stroke-width="2" stroke-linecap="round"/>
        <circle cx="12" cy="12" r="2" fill="#ff6b35"/>
      </svg>
      Grafana
    </div>
    <div class="breadcrumb">
      <span>Home</span>
      <span class="sep">â€º</span>
      <span>Dashboards</span>
      <span class="sep">â€º</span>
      <span class="active">IPL 2025 Analytics</span>
    </div>
  </div>
  <div class="topbar-right">
    <div class="time-range">
      <div class="dot"></div>
      IPL 2025 Season Â· Live
    </div>
    <button class="refresh-btn" onclick="refreshAll()">â†» 30s</button>
  </div>
</div>

<!-- DASHBOARD TITLE -->
<div class="dash-title-row">
  <div class="dash-title">
    ğŸ IPL 2025 Â· Match Analytics Platform
    <span class="tag">IPL2025.db</span>
  </div>
</div>

<!-- FILTER ROW -->
<div class="filter-row">
  <span class="filter-label">Team:</span>
  <select class="filter-select" id="teamFilter" onchange="applyFilter()">
    <option value="ALL">All Teams</option>
    <option value="MI">Mumbai Indians</option>
    <option value="CSK">Chennai Super Kings</option>
    <option value="RCB">Royal Challengers</option>
    <option value="KKR">Kolkata Knight Riders</option>
    <option value="SRH">Sunrisers Hyderabad</option>
    <option value="DC">Delhi Capitals</option>
    <option value="PBKS">Punjab Kings</option>
    <option value="RR">Rajasthan Royals</option>
    <option value="GT">Gujarat Titans</option>
    <option value="LSG">Lucknow Super Giants</option>
  </select>
  <span class="filter-label">Venue:</span>
  <select class="filter-select" id="venueFilter">
    <option>All Venues</option>
    <option>Wankhede Stadium</option>
    <option>Eden Gardens</option>
    <option>Chepauk</option>
    <option>Rajiv Gandhi Intl</option>
    <option>Chinnaswamy Stadium</option>
  </select>
  <span class="filter-label">Phase:</span>
  <select class="filter-select">
    <option>All Phases</option>
    <option>Group Stage</option>
    <option>Playoffs</option>
  </select>
  <span style="margin-left:auto;font-size:11px;color:var(--text-muted);">
    Last updated: <span id="lastUpdate">just now</span>
  </span>
</div>

<!-- ROW 1: STAT CARDS -->
<div class="grid row-stat">

  <!-- Total Matches -->
  <div class="panel loaded" style="animation-delay:0s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ“‹</span> Total Matches</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-blue)">74</div>
      <div class="stat-label">Matches Played</div>
      <div class="stat-delta delta-up">â†‘ 4 more than last season</div>
    </div>
  </div>

  <!-- Total Runs -->
  <div class="panel loaded" style="animation-delay:0.05s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸƒ</span> Total Runs</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-orange)">14,832</div>
      <div class="stat-label">Runs Scored</div>
      <div class="stat-delta delta-up">â†‘ 7.2% vs IPL 2024</div>
    </div>
  </div>

  <!-- Total Wickets -->
  <div class="panel loaded" style="animation-delay:0.1s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ³</span> Wickets</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-red)">682</div>
      <div class="stat-label">Total Wickets</div>
      <div class="stat-delta delta-down">â†“ 1.3% avg economy</div>
    </div>
  </div>

  <!-- Avg Match Score -->
  <div class="panel loaded" style="animation-delay:0.15s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ“Š</span> Avg 1st Inn Score</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-yellow)">178</div>
      <div class="stat-label">Per Innings</div>
      <div class="stat-delta delta-up">â†‘ 12 runs vs 2024</div>
    </div>
  </div>

  <!-- Sixes -->
  <div class="panel loaded" style="animation-delay:0.2s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ’¥</span> Sixes Hit</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-purple)">1,284</div>
      <div class="stat-label">Total Sixes</div>
      <div class="stat-delta delta-up">â†‘ Record season</div>
    </div>
  </div>

  <!-- NRR leader -->
  <div class="panel loaded" style="animation-delay:0.25s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ†</span> NRR Leader</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="stat-value" style="color:var(--accent-teal);font-size:28px">+0.842</div>
      <div class="stat-label">Mumbai Indians</div>
      <div class="stat-delta delta-neu">â€” 9W / 5L this season</div>
    </div>
  </div>

</div>

<!-- ROW 2: CHARTS -->
<div class="grid row-mid">

  <!-- Runs per Match (time series) -->
  <div class="panel loaded" style="animation-delay:0.3s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ“ˆ</span> Runs Per Match Â· Season Timeline</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="chart-wrap"><canvas id="runsTimeline"></canvas></div>
      <div class="ts-ticks">
        <span>Mar 22</span><span>Apr 01</span><span>Apr 11</span>
        <span>Apr 21</span><span>May 01</span><span>May 11</span><span>May 25</span>
      </div>
      <div class="panel-annotation">
        <span><span class="ann-dot" style="background:var(--accent-blue)"></span>1st Innings</span>
        <span><span class="ann-dot" style="background:var(--accent-orange)"></span>2nd Innings</span>
        <span><span class="ann-dot" style="background:rgba(255,255,255,0.1);border:1px dashed var(--text-muted)"></span>Avg</span>
      </div>
    </div>
  </div>

  <!-- Team Win Distribution -->
  <div class="panel loaded" style="animation-delay:0.35s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ¥§</span> Team Win Distribution</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="chart-wrap"><canvas id="winDonut"></canvas></div>
    </div>
  </div>

  <!-- Toss Conversion Gauge -->
  <div class="panel loaded" style="animation-delay:0.4s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ¯</span> Toss Win â†’ Match Win</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="gauge-wrap">
        <canvas class="gauge-svg" id="tossGauge" width="120" height="70"></canvas>
        <div class="gauge-val" style="color:var(--accent-yellow)">52.7%</div>
        <div class="gauge-sub">Tossâ†’Win Rate</div>
      </div>
      <div style="height:8px"></div>
      <div class="progress-item">
        <div class="progress-header"><span class="progress-name">Bat First Wins</span><span class="progress-val">48%</span></div>
        <div class="progress-track"><div class="progress-fill" style="width:48%;background:var(--accent-blue)"></div></div>
      </div>
      <div class="progress-item">
        <div class="progress-header"><span class="progress-name">Chase Wins</span><span class="progress-val">52%</span></div>
        <div class="progress-track"><div class="progress-fill" style="width:52%;background:var(--accent-orange)"></div></div>
      </div>
      <div class="progress-item">
        <div class="progress-header"><span class="progress-name">Tossâ†’Win (Field)</span><span class="progress-val">58%</span></div>
        <div class="progress-track"><div class="progress-fill" style="width:58%;background:var(--accent-green)"></div></div>
      </div>
    </div>
  </div>

</div>

<!-- ROW 3: TABLES + CHARTS -->
<div class="grid row-bot">

  <!-- Top Batsmen Table -->
  <div class="panel loaded" style="animation-delay:0.45s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ</span> Top Batsmen Â· batting_stats</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <table class="data-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Player</th>
            <th>Team</th>
            <th>Runs</th>
            <th>SR</th>
            <th>4s/6s</th>
            <th>Runs Bar</th>
          </tr>
        </thead>
        <tbody id="battingTable"></tbody>
      </table>
    </div>
  </div>

  <!-- Top Bowlers Table -->
  <div class="panel loaded" style="animation-delay:0.5s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ³</span> Top Bowlers Â· bowling_stats</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <table class="data-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Player</th>
            <th>Team</th>
            <th>Wkts</th>
            <th>Eco</th>
            <th>Avg</th>
            <th>Bar</th>
          </tr>
        </thead>
        <tbody id="bowlingTable"></tbody>
      </table>
    </div>
  </div>

  <!-- Venue Heatmap -->
  <div class="panel loaded" style="animation-delay:0.55s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸŸï¸</span> Avg Score by Venue</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="heatmap-grid" id="venueHeatmap"></div>
    </div>
  </div>

</div>

<!-- ROW 4: STRIKE RATE SCATTER + POINTS TABLE + RECENT ALERTS -->
<div class="grid row-last">

  <!-- Strike Rate vs Runs Scatter -->
  <div class="panel loaded" style="animation-delay:0.6s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ’«</span> Strike Rate vs Total Runs</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <div class="chart-wrap-lg"><canvas id="srScatter"></canvas></div>
    </div>
  </div>

  <!-- Points Table -->
  <div class="panel loaded" style="animation-delay:0.65s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ“‹</span> Points Table</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body">
      <table class="data-table">
        <thead>
          <tr><th>Pos</th><th>Team</th><th>W</th><th>L</th><th>Pts</th><th>NRR</th></tr>
        </thead>
        <tbody id="pointsTable"></tbody>
      </table>
    </div>
  </div>

  <!-- Recent Events / Alerts -->
  <div class="panel loaded" style="animation-delay:0.7s">
    <div class="panel-header">
      <div class="panel-title"><span class="icon">ğŸ””</span> Recent Events</div>
      <div class="panel-menu">
        <div class="panel-menu-btn">â†—</div>
        <div class="panel-menu-btn">â‹®</div>
      </div>
    </div>
    <div class="panel-body" id="alertsPanel"></div>
  </div>

</div>

<!-- BOTTOM PADDING -->
<div style="height:20px"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TEAMS = {
  MI:   { name:"Mumbai Indians",        color:"#1a56db", bg:"rgba(26,86,219,0.15)" },
  CSK:  { name:"Chennai Super Kings",   color:"#f59e0b", bg:"rgba(245,158,11,0.15)" },
  RCB:  { name:"Royal Challengers",     color:"#ef4444", bg:"rgba(239,68,68,0.15)" },
  KKR:  { name:"Kolkata Knight Riders", color:"#a855f7", bg:"rgba(168,85,247,0.15)" },
  SRH:  { name:"Sunrisers Hyderabad",   color:"#f97316", bg:"rgba(249,115,22,0.15)" },
  DC:   { name:"Delhi Capitals",        color:"#3b82f6", bg:"rgba(59,130,246,0.15)" },
  PBKS: { name:"Punjab Kings",          color:"#ec4899", bg:"rgba(236,72,153,0.15)" },
  RR:   { name:"Rajasthan Royals",      color:"#06b6d4", bg:"rgba(6,182,212,0.15)" },
  GT:   { name:"Gujarat Titans",        color:"#14b8a6", bg:"rgba(20,184,166,0.15)" },
  LSG:  { name:"Lucknow Super Giants",  color:"#84cc16", bg:"rgba(132,204,22,0.15)" },
};

const battingData = [
  { rank:1, name:"V Kohli",     team:"RCB",  runs:741, sr:148.2, fours:62, sixes:31 },
  { rank:2, name:"R Sharma",    team:"MI",   runs:692, sr:155.4, fours:58, sixes:38 },
  { rank:3, name:"S Gill",      team:"GT",   runs:668, sr:141.7, fours:71, sixes:22 },
  { rank:4, name:"KL Rahul",    team:"LSG",  runs:612, sr:138.9, fours:55, sixes:19 },
  { rank:5, name:"D Warner",    team:"DC",   runs:598, sr:144.1, fours:60, sixes:26 },
  { rank:6, name:"MS Dhoni",    team:"CSK",  runs:441, sr:168.3, fours:28, sixes:41 },
  { rank:7, name:"A Russell",   team:"KKR",  runs:430, sr:187.6, fours:24, sixes:52 },
  { rank:8, name:"H Pandya",    team:"MI",   runs:398, sr:162.4, fours:30, sixes:38 },
];

const bowlingData = [
  { rank:1, name:"J Bumrah",    team:"MI",   wkts:28, eco:6.82, avg:18.4 },
  { rank:2, name:"Y Chahal",    team:"RR",   wkts:26, eco:7.41, avg:19.2 },
  { rank:3, name:"K Rabada",    team:"PBKS", wkts:24, eco:7.89, avg:20.1 },
  { rank:4, name:"T Boult",     team:"RR",   wkts:22, eco:7.22, avg:21.5 },
  { rank:5, name:"R Ashwin",    team:"CSK",  wkts:21, eco:6.95, avg:22.8 },
  { rank:6, name:"M Shami",     team:"GT",   wkts:20, eco:8.12, avg:23.4 },
  { rank:7, name:"B Kumar",     team:"SRH",  wkts:19, eco:7.18, avg:24.1 },
];

const pointsData = [
  { pos:1,  team:"MI",   w:9,  l:5,  pts:18, nrr:"+0.84" },
  { pos:2,  team:"CSK",  w:8,  l:6,  pts:16, nrr:"+0.52" },
  { pos:3,  team:"RCB",  w:8,  l:6,  pts:16, nrr:"+0.31" },
  { pos:4,  team:"KKR",  w:7,  l:7,  pts:14, nrr:"+0.18" },
  { pos:5,  team:"SRH",  w:7,  l:7,  pts:14, nrr:"-0.07" },
  { pos:6,  team:"DC",   w:6,  l:8,  pts:12, nrr:"-0.22" },
  { pos:7,  team:"GT",   w:6,  l:8,  pts:12, nrr:"-0.44" },
  { pos:8,  team:"RR",   w:5,  l:9,  pts:10, nrr:"-0.61" },
  { pos:9,  team:"PBKS", w:5,  l:9,  pts:10, nrr:"-0.73" },
  { pos:10, team:"LSG",  w:5,  l:9,  pts:10, nrr:"-0.81" },
];

const venueData = [
  { venue:"Wankhede",        avg:194, matches:12, color:"#3b82f6" },
  { venue:"Eden Gardens",    avg:182, matches:10, color:"#a855f7" },
  { venue:"Chinnaswamy",     avg:196, matches:9,  color:"#ef4444" },
  { venue:"Chepauk",         avg:162, matches:11, color:"#f59e0b" },
  { venue:"Rajiv Gandhi",    avg:175, matches:10, color:"#f97316" },
  { venue:"Feroz Shah Kotla",avg:168, matches:8,  color:"#3b82f6" },
  { venue:"JSCA Ranchi",     avg:171, matches:7,  color:"#14b8a6" },
];

const alerts = [
  { color:"#22c55e", text:"MI beat CSK by 6 wkts Â· Wankhede", time:"2h ago" },
  { color:"#ef4444", text:"RCB collapse â€” 89 all out vs KKR Â· Eden", time:"1d ago" },
  { color:"#eab308", text:"V Kohli century â€” 104* (62b) vs SRH", time:"2d ago" },
  { color:"#3b82f6", text:"J Bumrah 5-fer â€” 5/18 vs DC Â· Kotla", time:"3d ago" },
  { color:"#a855f7", text:"A Russell smashes 16 sixes in match", time:"4d ago" },
  { color:"#22c55e", text:"GT top batting avg this season: 186.3", time:"5d ago" },
];

// Win data for donut
const winData = {
  labels: ["MI","CSK","RCB","KKR","SRH","DC","GT","RR","PBKS","LSG"],
  wins:   [9, 8, 8, 7, 7, 6, 6, 5, 5, 5],
  colors: Object.values(TEAMS).map(t => t.color),
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function rankBadge(r) {
  const cls = r===1?"gold":r===2?"silver":r===3?"bronze":"";
  return `<span class="rank-badge ${cls}">${r}</span>`;
}

function teamChip(code) {
  const t = TEAMS[code] || { color:"#64748b", bg:"rgba(100,116,139,0.2)" };
  return `<span class="team-chip" style="background:${t.bg};color:${t.color}">${code}</span>`;
}

function renderBatting() {
  const max = battingData[0].runs;
  const tb = document.getElementById("battingTable");
  tb.innerHTML = battingData.map(p => `
    <tr>
      <td>${rankBadge(p.rank)}</td>
      <td style="color:var(--text-primary);font-weight:500">${p.name}</td>
      <td>${teamChip(p.team)}</td>
      <td style="color:var(--accent-orange);font-weight:700">${p.runs}</td>
      <td style="color:var(--accent-yellow)">${p.sr}</td>
      <td style="color:var(--text-muted)">${p.fours}/${p.sixes}</td>
      <td style="min-width:60px">
        <div class="bar-cell">
          <div class="bar-bg"><div class="bar-fill" style="width:${(p.runs/max*100).toFixed(1)}%;background:${TEAMS[p.team]?.color||'#3b82f6'}"></div></div>
        </div>
      </td>
    </tr>`).join("");
}

function renderBowling() {
  const max = bowlingData[0].wkts;
  const tb = document.getElementById("bowlingTable");
  tb.innerHTML = bowlingData.map(p => `
    <tr>
      <td>${rankBadge(p.rank)}</td>
      <td style="color:var(--text-primary);font-weight:500">${p.name}</td>
      <td>${teamChip(p.team)}</td>
      <td style="color:var(--accent-red);font-weight:700">${p.wkts}</td>
      <td style="color:var(--accent-green)">${p.eco}</td>
      <td style="color:var(--text-muted)">${p.avg}</td>
      <td style="min-width:60px">
        <div class="bar-cell">
          <div class="bar-bg"><div class="bar-fill" style="width:${(p.wkts/max*100).toFixed(1)}%;background:${TEAMS[p.team]?.color||'#ef4444'}"></div></div>
        </div>
      </td>
    </tr>`).join("");
}

function renderPoints() {
  const tb = document.getElementById("pointsTable");
  tb.innerHTML = pointsData.map(p => {
    const nrrColor = parseFloat(p.nrr) >= 0 ? "var(--accent-green)" : "var(--accent-red)";
    const playoff = p.pos <= 4 ? "border-left:2px solid var(--accent-green)" : "";
    return `<tr style="${playoff}">
      <td style="color:var(--text-muted)">${p.pos}</td>
      <td>${teamChip(p.team)}</td>
      <td style="color:var(--accent-green);font-weight:700">${p.w}</td>
      <td style="color:var(--accent-red)">${p.l}</td>
      <td style="color:var(--text-primary);font-weight:700">${p.pts}</td>
      <td style="color:${nrrColor}">${p.nrr}</td>
    </tr>`;
  }).join("");
}

function renderVenueHeatmap() {
  const max = Math.max(...venueData.map(v => v.avg));
  const min = Math.min(...venueData.map(v => v.avg));
  const wrap = document.getElementById("venueHeatmap");
  wrap.innerHTML = venueData.map(v => {
    const pct = ((v.avg - min) / (max - min) * 100).toFixed(0);
    const opacity = 0.2 + (v.avg - min) / (max - min) * 0.7;
    return `<div class="heatmap-cell" style="background:${v.color.replace(')',`, ${opacity})`).replace('rgb','rgba').replace('#','rgba(')}; background:${v.color}${Math.round(opacity*255).toString(16).padStart(2,'0')}">
      <span style="color:var(--text-primary)">${v.venue}</span>
      <span style="color:white;font-weight:700">${v.avg} avg Â· ${v.matches}M</span>
    </div>`;
  }).join("");
}

function renderAlerts() {
  const panel = document.getElementById("alertsPanel");
  panel.innerHTML = alerts.map(a => `
    <div class="alert-item">
      <div class="alert-dot" style="background:${a.color};box-shadow:0 0 6px ${a.color}40"></div>
      <div>
        <div class="alert-text">${a.text}</div>
        <div class="alert-time">${a.time}</div>
      </div>
    </div>`).join("");
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHART.JS CHARTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Chart.defaults.color = "#64748b";
Chart.defaults.font.family = "'JetBrains Mono', monospace";
Chart.defaults.font.size = 10;

function makeGradient(ctx, color1, color2) {
  const g = ctx.createLinearGradient(0, 0, 0, 200);
  g.addColorStop(0, color1);
  g.addColorStop(1, color2);
  return g;
}

// 1. Runs Timeline
function buildRunsTimeline() {
  const ctx = document.getElementById("runsTimeline").getContext("2d");
  const labels = ["M1","M3","M5","M8","M11","M14","M17","M20","M23","M26","M29","M32","M35","M38","M41","M44","M47","M50","M53","M56","M59","M62","M65","M68","M71","M74"];
  const inn1 = labels.map(() => Math.floor(155 + Math.random()*60));
  const inn2 = labels.map((_, i) => Math.floor(inn1[i] - 20 + Math.random()*40));
  const avgLine = new Array(labels.length).fill(178);

  const grad1 = makeGradient(ctx, "rgba(59,130,246,0.4)", "rgba(59,130,246,0.02)");
  const grad2 = makeGradient(ctx, "rgba(249,115,22,0.35)", "rgba(249,115,22,0.02)");

  new Chart(ctx, {
    type: "line",
    data: {
      labels,
      datasets: [
        { label:"1st Inn", data:inn1, borderColor:"#3b82f6", backgroundColor:grad1, borderWidth:2, fill:true, tension:0.4, pointRadius:0, pointHoverRadius:4 },
        { label:"2nd Inn", data:inn2, borderColor:"#f97316", backgroundColor:grad2, borderWidth:2, fill:true, tension:0.4, pointRadius:0, pointHoverRadius:4 },
        { label:"Avg",     data:avgLine, borderColor:"rgba(255,255,255,0.15)", borderDash:[4,4], borderWidth:1, fill:false, pointRadius:0 },
      ]
    },
    options: {
      responsive:true, maintainAspectRatio:false,
      interaction:{ mode:"index", intersect:false },
      plugins: { legend:{ display:false }, tooltip:{ backgroundColor:"#131720", borderColor:"#1f2937", borderWidth:1 } },
      scales: {
        x: { grid:{ color:"rgba(255,255,255,0.04)" }, ticks:{ maxTicksLimit:7 } },
        y: { grid:{ color:"rgba(255,255,255,0.04)" }, min:100, max:240, ticks:{ stepSize:30 } }
      }
    }
  });
}

// 2. Win Donut
function buildWinDonut() {
  const ctx = document.getElementById("winDonut").getContext("2d");
  new Chart(ctx, {
    type:"doughnut",
    data:{
      labels: winData.labels,
      datasets:[{ data:winData.wins, backgroundColor:winData.colors.map(c=>c+"bb"), borderColor:winData.colors, borderWidth:1.5, hoverOffset:6 }]
    },
    options:{
      responsive:true, maintainAspectRatio:false,
      cutout:"60%",
      plugins:{
        legend:{ position:"right", labels:{ boxWidth:10, padding:8, font:{size:10} } },
        tooltip:{ backgroundColor:"#131720", borderColor:"#1f2937", borderWidth:1, callbacks:{ label: ctx => ` ${ctx.label}: ${ctx.raw} wins` } }
      }
    }
  });
}

// 3. Toss Gauge (Canvas arc)
function buildTossGauge() {
  const canvas = document.getElementById("tossGauge");
  const ctx = canvas.getContext("2d");
  const val = 0.527;
  const cx = 60, cy = 65, r = 50;

  // Track
  ctx.beginPath();
  ctx.arc(cx, cy, r, Math.PI, 0, false);
  ctx.strokeStyle = "#1f2937";
  ctx.lineWidth = 10;
  ctx.lineCap = "round";
  ctx.stroke();

  // Fill
  const grad = ctx.createLinearGradient(cx-r, cy, cx+r, cy);
  grad.addColorStop(0, "#3b82f6");
  grad.addColorStop(1, "#eab308");
  ctx.beginPath();
  ctx.arc(cx, cy, r, Math.PI, Math.PI + val*Math.PI, false);
  ctx.strokeStyle = grad;
  ctx.lineWidth = 10;
  ctx.lineCap = "round";
  ctx.stroke();

  // Tick marks
  for (let i=0; i<=10; i++) {
    const angle = Math.PI + (i/10)*Math.PI;
    const x1 = cx + (r-14)*Math.cos(angle);
    const y1 = cy + (r-14)*Math.sin(angle);
    const x2 = cx + (r-8)*Math.cos(angle);
    const y2 = cy + (r-8)*Math.sin(angle);
    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.lineTo(x2,y2);
    ctx.strokeStyle = "rgba(255,255,255,0.1)";
    ctx.lineWidth = 1;
    ctx.stroke();
  }
}

// 4. Strike Rate Scatter
function buildSRScatter() {
  const ctx = document.getElementById("srScatter").getContext("2d");
  const scatterData = battingData.map(p => ({
    x: p.runs,
    y: p.sr,
    label: p.name,
    team: p.team
  }));

  new Chart(ctx, {
    type:"bubble",
    data:{
      datasets: scatterData.map(d => ({
        label: d.label,
        data:[{ x:d.x, y:d.y, r: Math.sqrt(d.x)/3.5 }],
        backgroundColor: (TEAMS[d.team]?.color || "#64748b") + "88",
        borderColor: TEAMS[d.team]?.color || "#64748b",
        borderWidth:1.5,
      }))
    },
    options:{
      responsive:true, maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{
          backgroundColor:"#131720", borderColor:"#1f2937", borderWidth:1,
          callbacks:{
            label: ctx => ` ${ctx.dataset.label} Â· ${ctx.raw.x} runs Â· SR ${ctx.raw.y}`
          }
        }
      },
      scales:{
        x:{ title:{display:true, text:"Total Runs", color:"#64748b"}, grid:{ color:"rgba(255,255,255,0.04)" }, min:350, max:800 },
        y:{ title:{display:true, text:"Strike Rate", color:"#64748b"}, grid:{ color:"rgba(255,255,255,0.04)" }, min:130, max:200 }
      }
    }
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FILTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyFilter() {
  const sel = document.getElementById("teamFilter").value;
  // filter batting table
  const rows = document.querySelectorAll("#battingTable tr");
  rows.forEach(row => {
    const chip = row.querySelector(".team-chip");
    if (!chip) return;
    row.style.opacity = (sel === "ALL" || chip.textContent === sel) ? "1" : "0.25";
  });
  const brows = document.querySelectorAll("#bowlingTable tr");
  brows.forEach(row => {
    const chip = row.querySelector(".team-chip");
    if (!chip) return;
    row.style.opacity = (sel === "ALL" || chip.textContent === sel) ? "1" : "0.25";
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REFRESH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function refreshAll() {
  document.getElementById("lastUpdate").textContent = "just now";
  // Add subtle flash animation to all panels
  document.querySelectorAll(".panel").forEach(p => {
    p.style.borderColor = "var(--accent-blue)";
    setTimeout(() => { p.style.borderColor = ""; }, 600);
  });
}

// live clock
setInterval(() => {
  const el = document.getElementById("lastUpdate");
  const now = new Date();
  el.textContent = now.toLocaleTimeString([], { hour:"2-digit", minute:"2-digit" });
}, 30000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener("DOMContentLoaded", () => {
  renderBatting();
  renderBowling();
  renderPoints();
  renderVenueHeatmap();
  renderAlerts();

  // Stagger chart builds
  setTimeout(buildRunsTimeline, 100);
  setTimeout(buildWinDonut, 150);
  setTimeout(buildTossGauge, 200);
  setTimeout(buildSRScatter, 250);
});
</script>
</body>
</html>
